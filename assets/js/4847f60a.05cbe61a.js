"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[65705],{3905:function(t,e,n){n.d(e,{Zo:function(){return u},kt:function(){return d}});var a=n(67294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var p=a.createContext({}),s=function(t){var e=a.useContext(p),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},u=function(t){var e=s(t.components);return a.createElement(p.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},c=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),c=s(n),d=r,g=c["".concat(p,".").concat(d)]||c[d]||m[d]||l;return n?a.createElement(g,i(i({ref:e},u),{},{components:n})):a.createElement(g,i({ref:e},u))}));function d(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,i=new Array(l);i[0]=c;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},182:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return u},default:function(){return c}});var a=n(87462),r=n(63366),l=(n(67294),n(3905)),i=["components"],o={},p="A11y \u65e0\u969c\u788d\u63d2\u4ef6",s={unversionedId:"tutorials/a11yPlugin",id:"tutorials/a11yPlugin",isDocsHomePage:!1,title:"A11y \u65e0\u969c\u788d\u63d2\u4ef6",description:"Demo",source:"@site/docs/tutorials/a11yPlugin.md",sourceDirName:"tutorials",slug:"/tutorials/a11yPlugin",permalink:"/docs/tutorials/a11yPlugin",editUrl:"https://github.com/eva-engine/eva-engine.github.io/tree/master/docs/tutorials/a11yPlugin.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"MatterJS",permalink:"/docs/tutorials/matterJS"},next:{title:"Data Management",permalink:"/docs/tutorials/evaxPlugin"}},u=[{value:"Demo",id:"demo",children:[],level:2},{value:"Introduce",id:"introduce",children:[],level:2},{value:"Install",id:"install",children:[{value:"With NPM",id:"with-npm",children:[],level:3},{value:"In Browser",id:"in-browser",children:[],level:3}],level:2},{value:"Usage",id:"usage",children:[],level:2},{value:"API",id:"api",children:[],level:2},{value:"Tips",id:"tips",children:[],level:2},{value:"Eva.js \u65e0\u969c\u788d\u63d2\u4ef6\u52a8\u753b",id:"evajs-\u65e0\u969c\u788d\u63d2\u4ef6\u52a8\u753b",children:[{value:"Option1",id:"option1",children:[],level:3},{value:"Option2",id:"option2",children:[],level:3}],level:2}],m={toc:u};function c(t){var e=t.components,n=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,a.Z)({},m,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"a11y-\u65e0\u969c\u788d\u63d2\u4ef6"},"A11y \u65e0\u969c\u788d\u63d2\u4ef6"),(0,l.kt)("h2",{id:"demo"},"Demo"),(0,l.kt)("p",null,"//TODO"),(0,l.kt)("h2",{id:"introduce"},"Introduce"),(0,l.kt)("p",null,"Eva.js accessibility plugin, used to add accessibility capabilities to game objects. The plugin automatically adds auxiliary DOM by locating the position of the game object, so that the game object can be focused, and the game has a11y."),(0,l.kt)("h2",{id:"install"},"Install"),(0,l.kt)("h3",{id:"with-npm"},"With NPM"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tnpm install @eva/plugin-a11y\n")),(0,l.kt)("h3",{id:"in-browser"},"In Browser"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://unpkg.com/@eva/plugin-a11y@1.1.x/dist/EVA.plugin.a11y.min.js"><\/script>\n')),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("p",null,"First add system, and then add a11y component to the game objects."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import { A11ySystem, A11y, A11yActivate } from \'@eva/plugin-a11y\'\n\ngame.addSystem(new A11ySystem({\n  debug: true,\n  activate: A11yActivate.CHECK,\n  checkA11yOpen: () => {\n    return new Promise(resolve => {\n      resolve(true) // opened\n      resolve(false) // closed\n    })\n  }\n}))\n// add a11y\ngameObject.addComponent(new A11y({\n  hint: \'\u6309\u94ae\',\n  role: \'button\',\n  "aria-value": "0"\n  "aira-hidden": "true"\n}))\n')),(0,l.kt)("p",null,"The above code will automatically add an auxiliary DOM as shown in the following figure above the game object area:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://gw.alicdn.com/imgextra/i4/O1CN01I2uBms1Lvq6GBg6Bo_!!6000000001362-2-tps-2098-734.png",alt:"image.png"})),(0,l.kt)("p",null,"Working diagram"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://gw.alicdn.com/imgextra/i2/O1CN01mn5ubF1fLSyEMNBw0_!!6000000003990-2-tps-3332-1700.png",alt:"image.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"gameObject.addComponent(new A11y({ hint: 'text' }))\ngame.scene.removeChild(gameObject)\n\ngameObject.removeComponent('A11y')\n")),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"1\u3001A11ySystem")),(0,l.kt)("p",null,"\u6e38\u620f\u573a\u666f\u65e0\u969c\u788d\u80fd\u529b"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"),(0,l.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"debug"),(0,l.kt)("td",{parentName:"tr",align:null},"boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"Whether to turn on debugging, a red mask will appear after turning on"),(0,l.kt)("td",{parentName:"tr",align:null},"false")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"activate"),(0,l.kt)("td",{parentName:"tr",align:null},"A11yActivate"),(0,l.kt)("td",{parentName:"tr",align:null},"Whether to activate accessibility, the default is to automatically activate according to the user's system settings"),(0,l.kt)("td",{parentName:"tr",align:null},"CHECK")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"2\u3001A11y"),"\nAccessibility components, game objects give accessibility capabilities"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"),(0,l.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"hint"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"What needs to be read"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"role"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},'Accessibility roles, such as role="button"'),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"delay"),(0,l.kt)("td",{parentName:"tr",align:null},"number"),(0,l.kt)("td",{parentName:"tr",align:null},"Delay div inner time, in milliseconds"),(0,l.kt)("td",{parentName:"tr",align:null},"0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"aria-","*"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"Accessibility attributes"),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"3\u3001A11yActivate")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"CHECK"),(0,l.kt)("td",{parentName:"tr",align:null},"Check the accessibility according to the incoming method")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ENABLE"),(0,l.kt)("td",{parentName:"tr",align:null},"Enable plugin accessibility")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DISABLE"),(0,l.kt)("td",{parentName:"tr",align:null},"Disable plugin accessibility")))),(0,l.kt)("h2",{id:"tips"},"Tips"),(0,l.kt)("p",null,"Some points to note when using:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Some draggable gameplay needs to be optimized according to the business"),(0,l.kt)("li",{parentName:"ul"},"The auxiliary DOM node of the DragonBones animation is 1px"),(0,l.kt)("li",{parentName:"ul"},"Click events will automatically trigger 'touchstart/touchend/tip' events on the Event component")),(0,l.kt)("h2",{id:"evajs-\u65e0\u969c\u788d\u63d2\u4ef6\u52a8\u753b"},"Eva.js \u65e0\u969c\u788d\u63d2\u4ef6\u52a8\u753b"),(0,l.kt)("p",null,"For transition animations, the barrier-free DOM layer needs to wait until the animation ends to know the position of the game object."),(0,l.kt)("p",null,"eva-plugin-a11y chooses this to process the transition animation."),(0,l.kt)("h3",{id:"option1"},"Option1"),(0,l.kt)("p",null,"Listen to the finish event of the animation, and add barrier-free capabilities to the game object after the animation is complete."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"animation.on('finish', name => {\n  image.addComponent(new A11y({ hint: 'What needs to be read' }))\n});\n")),(0,l.kt)("p",null,"If there are multiple animations, you only need to listen to the finish event of the last animation."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// move animation\n// idle animation\nanimation.on('finish', name => {\n  name === 'idle' && image.addComponent(new A11y({ hint: 'What needs to be read' }))\n});\n")),(0,l.kt)("p",null,"It is not recommended to use accessibility capabilities in Infinity's mobile animations, such as such animations."),(0,l.kt)("p",null,"This type of animation is not accessible to users at all, and it is recommended to optimize it from the product level."),(0,l.kt)("h3",{id:"option2"},"Option2"),(0,l.kt)("p",null,"The construction of the barrier-free component also provides a delay parameter, and the developer can choose to render the barrier-free DOM of the game object at any time."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"image.addComponent(new A11y({ hint: 'What needs to be read', delay: 1000})\n")))}c.isMDXComponent=!0}}]);