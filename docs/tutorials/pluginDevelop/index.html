<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Plug-in development | Eva.js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://eva.js.org/docs/tutorials/pluginDevelop"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Plug-in development | Eva.js"><meta data-react-helmet="true" name="description" content="Generally, most of the logic can be realized through script components, involving general capabilities at the engine level or business level, and can be developed in the form of plug-ins. The plug-ins are mainly composed of Component and System."><meta data-react-helmet="true" property="og:description" content="Generally, most of the logic can be realized through script components, involving general capabilities at the engine level or business level, and can be developed in the form of plug-ins. The plug-ins are mainly composed of Component and System."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://eva.js.org/docs/tutorials/pluginDevelop"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/docs/tutorials/pluginDevelop" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/docs/tutorials/pluginDevelop" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3660d90a.css">
<link rel="preload" href="/assets/js/runtime~main.c7b2c894.js" as="script">
<link rel="preload" href="/assets/js/main.0c2761a9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Eva.js</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/quickstart">Tutorial</a><a class="navbar__item navbar__link" href="/docs/api/index">API</a><a href="https://eva.js.org/playground" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Demos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.yuque.com/eva/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/eva-engine/eva.js/issues/140" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eva-engine/eva.js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="https://eva.js.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>English<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://eva-engine.gitee.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>中文（中国）<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorials/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/eva-engine/eva.js/issues/140" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Basic</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/resourceManagement">Resource Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/game">Game</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/gameObject">GameObject</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/transformComponent">Transform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/compressedTexture">compressedTexture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Graphics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/prepareRender">Preparation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/imageComponent">Image</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/textComponent">Text</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphicsComponent">Graphics Graphics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/spriteComponent">Sprite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/maskComponent">Mask</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/ninePatchComponent">NinePatch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/tilingSpriteComponent">Tiled Wizard TilingSprite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/orderAndTransparent">Order and Alpha</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Animation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/transitionAnimation">Transition animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/spriteAnimation">Sprite animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/spineAnimation">Spine skeletal animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/dragonboneAnimation">Dragonbones 龙骨动画</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/lottieAnimation">Lottie Animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/interactionEvent">Interactive event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/customComponent">Custom component</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Plugin</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/sound">Sound</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/matterJS">MatterJS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/a11yPlugin">A11y 无障碍插件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/evaxPlugin">Data Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/performancePlugin">Performance monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/pluginDevelop">Plug-in development</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="plug-in-development">Plug-in development</h1><p>Generally, most of the logic can be realized through script components, involving general capabilities at the engine level or business level, and can be developed in the form of plug-ins. The plug-ins are mainly composed of Component and System.</p><p>The rendering of Eva.js is based on <a href="http://pixijs.io/">PixiJS</a>. Generally, plugins such as Img/Sprite/Spine actually create Pixi rendering objects, and plugins such as Stats/EvaX/Transition do not depend on Pixi. No matter what kind of plug-in, it outputs Component and System to the engine, but there are some differences in the development plan. Next, I will explain the simplest plug-in development method.</p><p>We provide a <a href="https://github.com/eva-engine/plugin-template">plugin template</a>, you can click on <code>Use this Template</code> to directly use the template for development, with the necessary scaffolding inside.</p><h2 id="basic">Basic</h2><h3 id="development">Development</h3><p>After reading this, I believe that everyone already knows about Eva.js and knows how to use it in the project. Here is a simple way to use a plug-in.</p><pre><code class="language-js">import {Demo, DemoSystem} from&#x27;.lib&#x27;
const game = new Game({
  systems: [new DemoSystem()]
})
const go = new GameObject()
go.addComponent(new Demo())
game.scene.addChild(go)
</code></pre><p>We can see that the plug-in is composed of Component and System, and a plug-in does not necessarily contain only one Component.</p><p>Therefore, the development of plug-ins needs to implement the Component and System that are exposed to users.</p><h3 id="plug-in-operation-logic">Plug-in operation logic</h3><p>Component (Component) can give game object capabilities, we record some configurations and properties on the component.
System is used to read the data on the component and realize the corresponding ability of the component.</p><p>After the system is added to the game instance, the system performs a series of corresponding operations when the components it needs to care about are added, removed, and changed to achieve some functions.</p><p>For example, in the Img plug-in, when the Img is added to the game object, a Pixi Sprite object will be created in the System and mounted on the Pixi Container corresponding to the GameObject. When the resource of the Img component changes, the System will modify the corresponding The texture on the sprite.</p><p>Next, I will explain how to design a component and how the System monitors component changes.</p><h3 id="build-and-release-specifications">Build and release specifications</h3><h2 id="development-practice">Development Practice</h2><p>Take <a href="a11yPlugin">@eva/plugin-a11y</a> plug-in as an example to give a detailed introduction to Eva.js plug-in development.</p><blockquote><p>@eva/plugin-a11y is used to add accessibility to game objects. In DOM development, an accessible reader can read the content of HTML elements. Currently, drawing elements in Canvas cannot achieve accessibility. The @eva/plugin-a11y plug-in automatically adds by locating the position of the game object Auxiliary DOM allows game objects to be focused by an accessible reader, allowing the game to have accessibility features.</p></blockquote><p>First design the Component, both need to give the ability of the game object.</p><h3 id="usage">Usage</h3><pre><code class="language-js">import {A11y, A11ySystem} from &#x27;@eva/plugin-a11y&#x27;

const game = new Game({
  systems: [new A11ySystem()]
})

const go = new GameObject()

go.addComponent(new A11y({
  hint:&#x27;Content to be read aloud&#x27;
}))

game.scene.addChild(go)

</code></pre><h3 id="component-design">Component Design</h3><p>-Determine the component name: <code>A11y</code>
-Design component parameters:
-hint what needs to be read</p><pre><code class="language-js">import {Component} from &#x27;@eva/eva.js&#x27;
export default class A11y extends Component {
  static componentName: string =&#x27;A11y&#x27; // Here is the name of the Component, which is used by the System to monitor changes

  /**
   * Accessible label reading content
   */
  public hint: string

  /**
   * Initialization method, the parameters of the constructor will be passed here
   */
  init(param = {hint:&#x27;&#x27;}) {
    const {hint} = param
    this.hint = hint
  }
}
</code></pre><h3 id="system-design">System Design</h3><p>-Determine the components to be monitored and which parameter changes need to be monitored
-Determine the system name
-Implement logic according to component changes</p><h4 id="step1-determine-the-components-and-parameters-to-be-monitored">Step1 Determine the components and parameters to be monitored</h4><pre><code class="language-js">import {System, decorators} from &#x27;@eva/eva.js&#x27;

@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // monitor the hint attribute changes of the A11y component
})
class A11ySystem extends System {

}
</code></pre><p>In the above code, we pass the name of the component that needs to be monitored for changes and the monitoring properties into <code>@decorators.componentObserver</code> in order to create the listener.</p><p>If you only need to add or remove monitoring components, you can leave out specific properties, such as</p><pre><code class="language-js">@decorators.componentObserver({
  A11y: [] // Monitor the hint attribute changes of the A11y component
})
</code></pre><p>If the monitored attribute is not directly mounted on the component object, there is a level of nesting</p><p>For example, monitor the size attribute under the style attribute of component A</p><p>It can be written like this:</p><pre><code class="language-js">@decorators.componentObserver({
  A: [{
    prop: [&#x27;style&#x27;,&#x27;size&#x27;]
  }]
})
</code></pre><p>If you want to monitor the style attribute in depth, you can write</p><pre><code class="language-js">@decorators.componentObserver({
  A: [{
    prop: [&#x27;style&#x27;],
    deep: true
  }]
})
</code></pre><p>If you want to monitor changes in multiple components, you can write like this</p><pre><code class="language-js">@decorators.componentObserver({
  A: [{
    prop: [&#x27;style&#x27;],
    deep: true
  }]
  B: [&#x27;props&#x27;]
})
</code></pre><h4 id="step2-set-the-system-name">Step2 Set the system name</h4><p>Set a name for System</p><pre><code class="language-js">import {System, decorators} from &#x27;@eva/eva.js&#x27;

@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // monitor the hint attribute changes of the A11y component
})
class A11ySystem extends System {
  static systemName =&#x27;A11ySystem&#x27;;
}
</code></pre><h4 id="step3-implement-logic-according-to-component-changes">Step3 Implement logic according to component changes</h4><p>Before that, we did some monitoring configuration, so how do we get the corresponding changes?</p><p>We know that System has an update life cycle, and we can get the changes of the current frame Component during the life cycle.</p><pre><code class="language-js">import {System, decorators, ComponentChanged} from &#x27;@eva/eva.js&#x27;

@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // monitor the hint attribute changes of the A11y component
})
class A11ySystem extends System {
  static systemName =&#x27;A11ySystem&#x27;;
  private elemMap = new Map()
  update () {
    const changes: ComponentChanged[] = this.componentObserver.clear() // Get all the major changes of the components that need to be monitored in the current frame, and clean up
    for (const changed of changes) {
        switch (changed.type) {
          case OBSERVER_TYPE.ADD:
            this.add(changed);
            break;
          case OBSERVER_TYPE.CHANGE:
            this.change(changed)
            break;
          case OBSERVER_TYPE.REMOVE:
            this.remove(changed);
            break;
        }
      }
  }
  add(changed) {
    if (changed.componentName ===&#x27;A11y&#x27;) {// If there are multiple components, they need to be processed separately
      const component = changed.component as A11y
      const elem = document.createElement(&#x27;div&#x27;)
      elem.setAttribute(&#x27;aria-label&#x27;, component.hint);
      this.elemMap.set(component, elem)
      document.body.append(elem) // add to body
    }
  }
  remove(changed) {
    if (changed.componentName ===&#x27;A11y&#x27;) {// If there are multiple components, they need to be processed separately
      const component = changed.component as A11y
      const elem = this.elemMap.get(component)
      elem.remove() // remove elem
    }
  }
  change(changed) {
    if (changed.componentName ===&#x27;A11y&#x27;) {// If there are multiple components, they need to be processed separately
      if (changed.prop?.prop[0] ===&#x27;hint&#x27;){ //If there are multiple monitoring properties that need to be processed separately
        const component = changed.component as A11y
        elem.setAttribute(&#x27;aria-label&#x27;, component.hint);
      }
    }
  }
}
</code></pre><p>The corresponding type of ComponentChanged is like this, you can refer to it, you don’t need to implement it in the code</p><pre><code class="language-js">export interface PureObserverProp {
  deep: boolean;
  prop: string[];
}

export enum ObserverType {
  ADD =&#x27;ADD&#x27;,
  REMOVE=&#x27;REMOVE&#x27;,
  CHANGE =&#x27;CHANGE&#x27;,
}

export interface ComponentChanged {
  type: ObserverType;
  component: Component;
  componentName: string;
  prop?: PureObserverProp;
  gameObject?: GameObject;
  systemName?: string;
}

</code></pre><p>Now we have created the DOM and placed it on the body. In terms of ability, we have completed the specific functions, because screen readers can already read the elements in the game, but it seems that some content is currently lacking, such as: unable By triggering DOM click events to trigger clicks in the game, the DOM has no width, height and positioning.</p><p>If you want to implement these functions, you have to get other components under the current component to implement the functions. If you want to trigger a click event, you need to determine whether <a href="interactionEvent">Event component</a> is installed. If it is installed, you can follow The event bound to Event triggers the corresponding event. If you want to get the width and height position, you can get the <a href="transformComponent">Transform component</a> of the game object</p><p>To increase the monitoring of the Event component, do the corresponding operations in the above add and remove methods.</p><pre><code class="language-js">@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // monitor the hint attribute changes of the A11y component
  Event: [] // Event add delete monitor
})
class A11ySystem extends System {
}
</code></pre><p>For the position and width and height, you can get the Transform corresponding to the GameObject when the A11y component is added. Here is just an example</p><pre><code class="language-js">add(changed) {
   if (changed.componentName ===&#x27;A11y&#x27;) {// If there are multiple components, they need to be processed separately
      const component = changed.component as A11y
      const elem = document.createElement(&#x27;div&#x27;)
      elem.setAttribute(&#x27;aria-label&#x27;, component.hint);
      this.elemMap.set(component, elem)
      document.body.append(elem) // add to body


      const transform = changed.gameObject.transform
      elem.style.width = transform.size.width +&#x27;px&#x27;
      elem.style.height = transform.size.width +&#x27;px&#x27;
      elem.style.x = transform.position.x +&#x27;px&#x27;
      elem.style.y = transform.position.y +&#x27;px&#x27;
    }
}
</code></pre><h2 id="plug-in-based-on-pixijs">Plug-in based on PixiJS</h2><p>Take the picture component as an example:</p><pre><code class="language-js">  import {
    GameObject,
    decorators,
    resource,
    ComponentChanged,
    RESOURCE_TYPE,
    OBSERVER_TYPE,
  } from &#x27;@eva/eva.js&#x27;;
  import {
    RendererManager,
    ContainerManager,
    RendererSystem,
    Renderer,
  } from &#x27;@eva/plugin-renderer&#x27;;

  @decorators.componentObserver({
    Img: [{prop: [&#x27;resource&#x27;], deep: false}],
  })
  export default class Img extends Renderer {// Based on PixiJS rendering plug-in, our System needs to inherit from a unified Renderer class
  rendererSystem: RendererSystem;
  init() {// Get the rendererSystem in init to add Pixi objects later, and the current system needs to be registered in the rendererManager.
    this.rendererSystem = this.game.getSystem(RendererSystem) as RendererSystem;
    this.rendererSystem.rendererManager.register(this);
  }
  rendererUpdate(gameObject: GameObject) {// rendererUpdate replaces the Update method, because update has been implemented in the Renderer class
    const {width, height} = gameObject.transform.size;
    if (this.imgs[gameObject.id]) {
      this.imgs[gameObject.id].sprite.width = width;
      this.imgs[gameObject.id].sprite.height = height;
    }
  }

  async componentChanged(changed: ComponentChanged) {// The update method is implemented in the Renderer class, and the component change corresponding to Img is passed to componentChanged
  if (changed.componentName ===&#x27;Img&#x27;) {
      const component: ImgComponent = changed.component as ImgComponent;
      if (changed.type === OBSERVER_TYPE.ADD) {
        const sprite = new Sprite(null);
        resource.getResource(component.resource).then(({instance}) =&gt; {
          if (!instance) {
            console.error(
              `GameObject:${changed.gameObject.name}&#x27;s Img resource load error`,
            );
          }
          sprite.image = instance;
        });
        this.imgs[changed.gameObject.id] = sprite;
        this.containerManager
          .getContainer(changed.gameObject.id)
          .addChildAt(sprite.sprite, 0); // Put the created Pixi rendering object into the Pixi container corresponding to the GameObject
      } else if (changed.type === OBSERVER_TYPE.CHANGE) {
        const {instance} = await resource.getResource(component.resource);
        if (!instance) {
          console.error(
            `GameObject:${changed.gameObject.name}&#x27;s Img resource load error`,
          );
        }
        this.imgs[changed.gameObject.id].image = instance;
      } else if (changed.type === OBSERVER_TYPE.REMOVE) {
        const sprite = this.imgs[changed.gameObject.id];
        this.containerManager
          .getContainer(changed.gameObject.id)
          .removeChild(sprite.sprite);
        delete this.imgs[changed.gameObject.id];
      }
    }
  }

</code></pre><h2 id="life-cycle">life cycle</h2><p><img src="https://gw.alicdn.com/imgextra/i1/O1CN01fYzaFt1URSNYG3T7h_!!6000000002514-2-tps-1420-1208.png" alt="image.png"></p><h2 id="to-sum-up">to sum up</h2><p>Through the combination of Component and System, we can implement a variety of common plug-ins. In daily development, we only need the capabilities provided by <a href="customComponent">CustomComponent</a> to develop game logic.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/eva-engine/eva-engine.github.io/tree/master/docs/tutorials/pluginDevelop.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/performancePlugin"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Performance monitoring</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic" class="table-of-contents__link toc-highlight">Basic</a><ul><li><a href="#development" class="table-of-contents__link toc-highlight">Development</a></li><li><a href="#plug-in-operation-logic" class="table-of-contents__link toc-highlight">Plug-in operation logic</a></li><li><a href="#build-and-release-specifications" class="table-of-contents__link toc-highlight">Build and release specifications</a></li></ul></li><li><a href="#development-practice" class="table-of-contents__link toc-highlight">Development Practice</a><ul><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#component-design" class="table-of-contents__link toc-highlight">Component Design</a></li><li><a href="#system-design" class="table-of-contents__link toc-highlight">System Design</a></li></ul></li><li><a href="#plug-in-based-on-pixijs" class="table-of-contents__link toc-highlight">Plug-in based on PixiJS</a></li><li><a href="#life-cycle" class="table-of-contents__link toc-highlight">life cycle</a></li><li><a href="#to-sum-up" class="table-of-contents__link toc-highlight">to sum up</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Eva.js 2019 - NOW  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  MIT License</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c7b2c894.js"></script>
<script src="/assets/js/main.0c2761a9.js"></script>
</body>
</html>