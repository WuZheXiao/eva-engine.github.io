<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Custom component | Eva.js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://eva.js.org/docs/tutorials/customComponent"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Custom component | Eva.js"><meta data-react-helmet="true" name="description" content="Introduce"><meta data-react-helmet="true" property="og:description" content="Introduce"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://eva.js.org/docs/tutorials/customComponent"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/docs/tutorials/customComponent" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/zh-cn/docs/tutorials/customComponent" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/docs/tutorials/customComponent" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3660d90a.css">
<link rel="preload" href="/assets/js/runtime~main.c3d05a5e.js" as="script">
<link rel="preload" href="/assets/js/main.ac45b80e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Eva.js</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/quickstart">Tutorial</a><a class="navbar__item navbar__link" href="/docs/api/index">API</a><a href="https://eva.js.org/playground" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Demos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.yuque.com/eva/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/eva-engine/eva.js/issues/140" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eva-engine/eva.js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="https://eva.js.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>English<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://eva-engine.github.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>中文（中国）<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorials/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/eva-engine/eva.js/issues/140" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Basic</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/resourceManagement">Resource Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/game">Game</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/gameObject">GameObject</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/transformComponent">Transform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/compressedTexture">compressedTexture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Graphics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/prepareRender">Preparation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/imageComponent">Image</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/textComponent">Text</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphicsComponent">Graphics Graphics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/spriteComponent">Sprite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/maskComponent">Mask</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/ninePatchComponent">NinePatch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/tilingSpriteComponent">Tiled Wizard TilingSprite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/orderAndTransparent">Order and Alpha</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Animation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/transitionAnimation">Transition animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/spriteAnimation">Sprite animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/spineAnimation">Spine skeletal animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/dragonboneAnimation">Dragonbones 龙骨动画</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/lottieAnimation">Lottie Animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/interactionEvent">Interactive event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/customComponent">Custom component</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Plugin</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/sound">Sound</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/matterJS">MatterJS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/a11yPlugin">A11y 无障碍插件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/evaxPlugin">Data Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/performancePlugin">Performance monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/pluginDevelop">Plug-in development</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="custom-component">Custom component</h1><h2 id="introduce">Introduce</h2><p>In daily business development, we need to customize some business logic. Each game object may need a separate logic or &quot;data driver&quot;. We develop business in the form of custom components.</p><p>Demo：<a href="https://eva.js.org/playground/#/component">https://eva.js.org/playground/#/component</a></p><h3 id="for-example">for example:</h3><p>The experience of crop production in the plants of Baba Farm will change in real time,</p><p>Step1: We create a production component
Step2: Set the speed of experience production and the attributes of current experience on the component
Step3: Through the life cycle method, modify the experience value according to the production speed in real time, and then modify the text on the text component to display the experience value
Step4: Provide a custom event to collect crop experience, which is called when the user clicks on the plant</p><p><img src="https://img.alicdn.com/imgextra/i1/O1CN01wuCCfA1cXsquhQJ06_!!6000000003611-2-tps-452-492.png" alt="image.png"></p><p><img src="https://gw.alicdn.com/imgextra/i1/O1CN01TCaFQj1jWEkJC0TGp_!!6000000004555-2-tps-1724-958.png" alt="image.png"></p><h2 id="initialization">Initialization</h2><p>Create custom components by inheriting Component</p><pre><code class="language-js">import {Component} from &#x27;@eva/eva.js&#x27;
class Move extends Component {
  static componentName =&#x27;Move&#x27; // Set the name of the component
}
</code></pre><h2 id="attributes">Attributes</h2><p>Set properties to the component, which can be used/modified in the entire component.</p><pre><code class="language-js">class Move extends Component {
  static componentName =&#x27;Move&#x27;
  speed = {
    // set properties
    // Moving speed
    x: 100,
    y: 200
  }
}
</code></pre><h2 id="install">Install</h2><p>To use custom component.</p><pre><code class="language-js">const go = new GameObject(&#x27;name&#x27;)
go.addComponent(new Move({
  speed: {
    x: 100,
    y: 100
  }
}))
</code></pre><h2 id="life-cycle">life cycle</h2><p><img src="https://gw.alicdn.com/imgextra/i1/O1CN01VCWqjG1qmuTjGuJ4y_!!6000000005539-2-tps-1422-1202.png" alt="image.png"></p><h3 id="initialization-1">Initialization</h3><h4 id="init">Init</h4><p>Create a custom component and implement the init method for initialization, usually by setting the parameters to the properties on the component.
The parameters passed in when the component is instantiated will be passed to the init method when the component is added to the game object.
Generally speaking, the parameters we pass in correspond to the attributes on the component.
This method will be executed at the time of <code>addComponent</code>, even if the current component is instantiated in advance.</p><pre><code class="language-js">interface MoveParams {
  speed: {
    x: number,
    y: number
  };
}

class Move extends Component {
  //...
  init(params: MoveParams) {
    this.speed = params.speed || {x: 0, y: 0}
  }
}

</code></pre><h4 id="awake">Awake</h4><p>The game object is executed after it is installed in the game object.
If the game scene and all game objects are ready, you can get the nodes that are already on the game object tree.
We don&#x27;t do this for normal coding development, but it can come in handy in editor development.</p><pre><code class="language-js">class Move extends Component {
  // ...
  awake() {}
}
</code></pre><h4 id="start">Start</h4><p>Like Awake, Start is also called at the beginning of the life cycle, but it will be called before the component is updated for the first time.
We can bind other components to the object in the Start callback function.</p><pre><code class="language-js">class Move extends Component {
  // ...
  private img: Img = null
start() {
  this.img = this.gameObject.getComponent(Img)
  }
}
</code></pre><h3 id="game-events">Game events</h3><h4 id="onpause">onPause</h4><p>Execute at the time of <code>game.pause()</code></p><h4 id="onresume">onResume</h4><p>Execute at the time of <code>game.resume()</code></p><h3 id="game-loop">Game loop</h3><h4 id="update">Update</h4><p>Execute every frame</p><pre><code class="language-js">class Move extends Component {
  // ...
  update(e) {
    // Let the object move at a certain speed displacement = speed * event
    const position = this.gameObject.transform.position
    this.gameObject.transform.position.x += this.speed.x * (e.deltaTime / 1000)
    this.gameObject.transform.position.y += this.speed.y * (e.deltaTime / 1000)
  }
}
</code></pre><h4 id="lateupdate">LateUpdate</h4><p>The last execution of each frame will be executed after the update execution of all components. Some components rely on the running results of other components, such as position following. After the animation component changes the position, the following component can read the position property on the Transform component.</p><h3 id="disable">Disable</h3><h4 id="destory">Destory</h4><p>Called on destruction</p><h2 id="custom-event">Custom event</h2><p>You can perform some operations on custom events on the component. For example, in the following example, an acceleration method and a deceleration method are added.</p><pre><code class="language-js">class Move extends Component {
  //...
  speedUp(value = 20) {
    this.speed.x += value
    this.speed.y += value
  }
  speedDown(value = 20) {
    this.speed.x -= value
    this.speed.y -= value
  }
}
</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/eva-engine/eva-engine.github.io/tree/master/docs/tutorials/customComponent.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/interactionEvent"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Interactive event</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorials/sound"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sound<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduce" class="table-of-contents__link toc-highlight">Introduce</a><ul><li><a href="#for-example" class="table-of-contents__link toc-highlight">for example:</a></li></ul></li><li><a href="#initialization" class="table-of-contents__link toc-highlight">Initialization</a></li><li><a href="#attributes" class="table-of-contents__link toc-highlight">Attributes</a></li><li><a href="#install" class="table-of-contents__link toc-highlight">Install</a></li><li><a href="#life-cycle" class="table-of-contents__link toc-highlight">life cycle</a><ul><li><a href="#initialization-1" class="table-of-contents__link toc-highlight">Initialization</a></li><li><a href="#game-events" class="table-of-contents__link toc-highlight">Game events</a></li><li><a href="#game-loop" class="table-of-contents__link toc-highlight">Game loop</a></li><li><a href="#disable" class="table-of-contents__link toc-highlight">Disable</a></li></ul></li><li><a href="#custom-event" class="table-of-contents__link toc-highlight">Custom event</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Eva.js 2019 - NOW  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  MIT License</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c3d05a5e.js"></script>
<script src="/assets/js/main.ac45b80e.js"></script>
</body>
</html>